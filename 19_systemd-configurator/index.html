<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Systemd Configurator</title>
  <!-- Material Design Lite (no build step) -->
  <link rel="stylesheet" href="https://code.getmdl.io/1.3.0/material.indigo-pink.min.css">
  <script defer src="https://code.getmdl.io/1.3.0/material.min.js"></script>
  <link rel="stylesheet" href="styles.css" />
</head>
<body class="mdl-base">
  <div class="mdl-layout mdl-js-layout mdl-layout--fixed-header">
    <header class="mdl-layout__header mdl-layout__header--scroll mdl-color--indigo-500">
      <div class="mdl-layout__header-row">
        <span class="mdl-layout-title">Systemd Unit File Viewer</span>
  <small class="version-info">v1.1.0 (2025-09-14)</small>
        <div class="mdl-layout-spacer"></div>
        <nav class="mdl-navigation">
          <label class="mdl-button mdl-js-button mdl-button--raised mdl-button--colored" for="fileInput">Load Unit File</label>
          <input id="fileInput" type="file" accept=".service,.socket,.target,.timer,.path,.mount,.slice,.swap,.link,.netdev,.network,.conf,.d" style="display:none" />
        </nav>
      </div>
      
      <!-- Unit Type Tabs -->
      <div class="mdl-layout__tab-bar mdl-js-ripple-effect">
        <a href="#service-tab" class="mdl-layout__tab">1. Service Units (.service)</a>
        <a href="#socket-tab" class="mdl-layout__tab">2. Socket Units (.socket)</a>
        <a href="#target-tab" class="mdl-layout__tab">3. Target Units (.target)</a>
        <a href="#device-tab" class="mdl-layout__tab">4. Device Units (.device)</a>
        <a href="#mount-tab" class="mdl-layout__tab">5. Mount Units (.mount)</a>
        <a href="#automount-tab" class="mdl-layout__tab">6. Automount (.automount)</a>
        <a href="#timer-tab" class="mdl-layout__tab">7. Timer Units (.timer)</a>
        <a href="#swap-tab" class="mdl-layout__tab">8. Swap Units (.swap)</a>
        <a href="#path-tab" class="mdl-layout__tab">9. Path Units (.path)</a>
        <a href="#slice-tab" class="mdl-layout__tab">10. Slice Units (.slice)</a>
        <a href="#scope-tab" class="mdl-layout__tab">11. Scope Units (.scope)</a>
      </div>
    </header>

    <main class="mdl-layout__content">
      <div class="split-layout">
        <div class="split-left">
          <div class="file-viewer mdl-shadow--2dp">
            <div class="mdl-grid">
              <div class="mdl-cell mdl-cell--12-col">
                <div class="current-file">
                  <span id="currentFileName"></span>
                  <span id="currentFileType"></span>
                </div>
                <pre id="fileContent" class="content-viewer"></pre>
              </div>
            </div>
          </div>
        </div>
        <div class="split-right">
          <div id="unitHelpPanel">
            <div class="unit-info mdl-card mdl-shadow--2dp">
              <div class="mdl-card__title">
                <h2 class="mdl-card__title-text" id="unitHelpTitle">Systemd Unit Help</h2>
              </div>
              <div class="mdl-card__supporting-text" id="unitHelpText">
                <p>Select a unit type tab to view help and documentation.</p>
              </div>
            </div>
          </div>
        </div>

      <!-- Panels for each unit type (required for tab switching logic) -->
      <div class="panel" data-panel="service"></div>
      <div class="panel" data-panel="socket"></div>
      <div class="panel" data-panel="target"></div>
      <div class="panel" data-panel="device"></div>
      <div class="panel" data-panel="mount"></div>
      <div class="panel" data-panel="automount"></div>
      <div class="panel" data-panel="timer"></div>
      <div class="panel" data-panel="swap"></div>
      <div class="panel" data-panel="path"></div>
      <div class="panel" data-panel="slice"></div>
      <div class="panel" data-panel="scope"></div>
      </div>
    </main>

    <!-- Removed popup help dialog -->
  </div>

  <!-- New Unit Wizard Dialog -->
  <dialog class="mdl-dialog" id="newUnitDialog">
    <h4 class="mdl-dialog__title">Create New Systemd Unit</h4>
      <div class="mdl-dialog__content">
        <div class="mdl-textfield mdl-js-textfield mdl-textfield--floating-label">
          <select id="unitTypeSelect" class="mdl-textfield__input">
            <option value="">Select unit type...</option>
            <option value="service" data-manpage="systemd.service">.service - Service/Daemon Process</option>
            <option value="socket" data-manpage="systemd.socket">.socket - IPC/Network Socket</option>
            <option value="target" data-manpage="systemd.target">.target - Group/Milestone</option>
            <option value="device" data-manpage="systemd.device">.device - Device Unit</option>
            <option value="mount" data-manpage="systemd.mount">.mount - Filesystem Mount</option>
            <option value="automount" data-manpage="systemd.automount">.automount - Auto Mount</option>
            <option value="timer" data-manpage="systemd.timer">.timer - Scheduled Tasks</option>
            <option value="swap" data-manpage="systemd.swap">.swap - Swap Space</option>
            <option value="path" data-manpage="systemd.path">.path - Path Monitor</option>
            <option value="slice" data-manpage="systemd.slice">.slice - Resource Control</option>
            <option value="scope" data-manpage="systemd.scope">.scope - External Process</option>
          </select>
        </div>
        <div class="manpage-link" style="margin-top: 10px;">
          <a id="manpageLink" href="#" target="_blank" style="display: none;">View Man Page</a>
        </div>      <!-- Dynamic form fields will be inserted here -->
      <div id="unitTypeForm"></div>
    </div>
    <div class="mdl-dialog__actions">
      <button type="button" class="mdl-button create">Create</button>
      <button type="button" class="mdl-button close">Cancel</button>
    </div>
  </dialog>

  <!-- Unit Type Quick Reference -->
  <dialog class="mdl-dialog" id="unitTypeInfo">
    <h4 class="mdl-dialog__title">Systemd Unit Types</h4>
    <div class="mdl-dialog__content">
      <ul class="mdl-list">
        <li class="mdl-list__item mdl-list__item--two-line">
          <span class="mdl-list__item-primary-content">
            <span>Service Unit (.service)</span>
            <span class="mdl-list__item-sub-title">Manages daemons and background processes</span>
          </span>
        </li>
        <li class="mdl-list__item mdl-list__item--two-line">
          <span class="mdl-list__item-primary-content">
            <span>Socket Unit (.socket)</span>
            <span class="mdl-list__item-sub-title">IPC or network socket activation</span>
          </span>
        </li>
        <li class="mdl-list__item mdl-list__item--two-line">
          <span class="mdl-list__item-primary-content">
            <span>Target Unit (.target)</span>
            <span class="mdl-list__item-sub-title">Groups units and provides sync points</span>
          </span>
        </li>
        <!-- More unit types... -->
      </ul>
    </div>
    <div class="mdl-dialog__actions">
      <button type="button" class="mdl-button close">Close</button>
    </div>
  </dialog>

  <script src="script.js"></script>
</body>
</html>
